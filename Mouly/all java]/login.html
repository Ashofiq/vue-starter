<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <title>login form</title>
</head>
<body>
    <form onsubmit="Validation(event)">
        <h2 id="msg"></h2>
        <div class="form-group">
          <label for="username" >username</label>
          <input type="username" class="form-control" id="username" name="" aria-describedby="username" placeholder="Enter username">
          <small id="err_username"></small> 
       
        </div>
        <br>
        <div class="form-group">
          <label for="exampleInputPassword1">Password</label>
          <input type="password" class="form-control" id="password" placeholder="Password">
          <small id="err_password"></small>
        </div>
       <br>
        <button type="submit" class="btn btn-primary" id="submit">Submit</button>
      </form>
</body>
        <script>
            function userlogin(username,password) {
                fetch('https://dummyjson.com/auth/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            
            username: username,
            password: password,
            // expiresInMins: 60, // optional 
        })
        })
                .then(res => res.json())
                .then((user)=>{
                // console.log(user)
                // console.log("message",user.message);
                //    var message=user.message
                //    console.log("hello",message);

                    var token=user.token;
                    // console.log(user.token);
        if(token){
            document.getElementById('msg').innerHTML="valid user";
            document.getElementById('username').classList.add('border-success')
        document.getElementById('password').classList.add('border-success')
}else{

            document.getElementById('msg').innerHTML="invalid user";
            document.getElementById('username').classList.add('border-danger')
            document.getElementById('password').classList.add('border-danger')
        }
                    
});
            
    }
    
    document.getElementById("username").onchange = function () {
        var username = this.value;
        console.log(username);
        
    }

    
    document.getElementById("password").onchange = function () {
        var password = this.value;
        console.log(password);
        
    }
// Validation()
    function Validation(event)
    {
        event.preventDefault()
        console.log(event);
        
    var username = document.getElementById("username").value;
    var password= document.getElementById("password").value;
      console.log(username);   
  
     if (username == "") {
         
         document.getElementById("err_username").innerHTML = 'username is required';
         
     }
     if (password == "") {

         document.getElementById("err_password").innerHTML = 'password is required';
         
     }
     
     userlogin(username,password)
    

    }

   


// function errorMessage() {
//         var error = document.getElementById("error")
//         if (isNaN(document.getElementById("email").value)) 
//         {
 
            
//             error.innerHTML = "<span style='color: red;'>"+
//                         "Please enter a valid email</span>"
//         } else {
//             error.innerHTML = ""
//         }
//     }
// console.log(error);

</script>


<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</html>